(this["webpackJsonpproperty-listing"]=this["webpackJsonpproperty-listing"]||[]).push([[0],{24:function(e,t,r){},25:function(e,t,r){},34:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(17),i=r.n(c),s=(r(24),r(25),r(9)),l=r(7),o=r(2);function p(){var e=Object(o.f)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}r(34);var d=r(0),j=function(e){var t=e.title;return Object(d.jsx)("section",{className:"intro",children:Object(d.jsx)("div",{className:"intro__wrapper content-wrapper",children:Object(d.jsx)("h2",{className:"intro__heading",children:t})})})},u=(r(36),r.p+"static/media/spritesheet.71370694.svg"),h=(r(37),{IndependentLiving:{humanized:"Independent living",color:"#006F79"},SupportAvailable:{humanized:"Restaurant & Support available",color:"#EC6608"}}),b=(r(38),function(e){var t,r,n=e.data,a=n.id,c=n.title,i=n.address,s=n.type,o=n.price,p="/details/".concat(a);return Object(d.jsx)("li",{className:"listing-card",children:Object(d.jsxs)("article",{className:"listing-card__wrapper",children:[Object(d.jsxs)(l.b,{to:p,className:"listing-card__photo-wrapper-link","aria-label":"Go to "+c+" listing page",children:[Object(d.jsxs)("picture",{children:[Object(d.jsx)("source",{media:"(min-width: 779px)",srcSet:"https://via.placeholder.com/379x227/FF9999/FFFFFF?text=379x227%20placeholder"}),Object(d.jsx)("img",{className:"listing-card__photo",width:"360",height:"227",src:"https://via.placeholder.com/360x227/FF9999/FFFFFF?text=360x227%20placeholder",alt:c+" - Photo"})]}),void 0!==s||null!==s?Object(d.jsx)("div",{className:"listing-card__tag-wrapper",style:{backgroundColor:h[s].color},children:Object(d.jsx)("p",{className:"listing-card__tag",children:h[s].humanized})}):""]}),Object(d.jsxs)("div",{className:"listing-card__info-wrapper",children:[Object(d.jsx)(l.b,{to:p,className:"listing-card__link","aria-label":"Go to "+c+" page",children:Object(d.jsx)("h2",{className:"listing-card__title",children:(r=c,r.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1)})))})}),Object(d.jsx)("p",{className:"listing-card__address",children:i}),Object(d.jsxs)("p",{className:"listing-card__price",children:["New Properties for Sale from ",Object(d.jsxs)("b",{children:["\xa3",(t=o,t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))]})]}),Object(d.jsx)("p",{className:"listing-card__ownership-options",children:"Shared Ownership Available"})]})]})})}),f=function(e){var t=e.fetchedPropertyData,r=e.propertyData,a=e.cardLimit,c=Object(n.useRef)(!0);Object(n.useEffect)((function(){c.current&&(c.current=!1)}),[]);var i=function(){return Object(d.jsx)("ul",{className:"listing-list",children:Object(d.jsx)("h3",{className:"listing-list__error-message",children:"Sorry, nothing was found!"})})};if(t.length>0||c.current){if(r.length>0)return Object(d.jsx)("ul",{className:"listing-list",children:r.slice(0,a).map((function(e){return Object(d.jsx)(b,{data:e},e.id)}))});if(c.current)return"";i()}return i()},O=function(e){var t=e.propertyData,r=e.cardLimit,n=e.onSeeMoreClick,a=e.propertyDataState,c=a.fetchedPropertyData,i=a.propertyDataIsLoading,s=a.propertyDataIsError;return i?Object(d.jsx)("section",{className:"listing",children:Object(d.jsxs)("div",{className:"listing__wrapper content-wrapper",children:[Object(d.jsx)("h2",{className:"visually-hidden",children:"Property Data is Being Loaded"}),Object(d.jsx)("div",{className:"loading-spinner"})]})}):s?Object(d.jsx)("section",{className:"listing",children:Object(d.jsx)("div",{className:"listing__wrapper content-wrapper",children:Object(d.jsx)("h2",{className:"listing__error-message",children:"Failed to Load Property Data"})})}):Object(d.jsx)("section",{className:"listing",children:Object(d.jsxs)("div",{className:"listing__wrapper content-wrapper",children:[Object(d.jsx)("h2",{className:"visually-hidden",children:"Recently Developed Property Listing"}),Object(d.jsx)(f,{fetchedPropertyData:c,propertyData:t,cardLimit:r}),r<t.length?Object(d.jsxs)(l.b,{className:"listing__see-more-button",onClick:function(e){e.preventDefault(),n()},to:"#",children:["See more",Object(d.jsx)("svg",{width:"7",height:"17",children:Object(d.jsx)("use",{xlinkHref:u+"#icon-arrow-right"})})]}):""]})})},g=(r(39),function(e){var t=e.onInputChange;return Object(d.jsx)("section",{className:"listing-filter",children:Object(d.jsx)("div",{className:"listing-filter__wrapper content-wrapper",children:Object(d.jsxs)("form",{className:"listing-filter__form",onSubmit:function(e){e.preventDefault()},children:[Object(d.jsx)("label",{className:"listing-filter__label",htmlFor:"title",children:"Filter"}),Object(d.jsx)("input",{onChange:function(e){e.preventDefault(),t(e.target.value)},className:"listing-filter__input",id:"title",name:"title",type:"text",placeholder:"By Property Title",required:!0})]})})})}),m=function(e){var t=e.propertyData,r=e.onInputChange,n=e.cardLimit,a=e.onSeeMoreClick,c=e.propertyDataState;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("main",{className:"page-main",children:[Object(d.jsx)("h1",{className:"visually-hidden",children:"Property Listing - Main Page"}),Object(d.jsx)(j,{title:"Our Latest Developments"}),Object(d.jsx)(g,{onInputChange:r}),Object(d.jsx)(O,{propertyDataState:c,propertyData:t,cardLimit:n,onSeeMoreClick:a})]})})},x=(r(40),function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("main",{className:"page-main page-main--not-found",children:Object(d.jsx)("section",{className:"not-found",children:Object(d.jsxs)("div",{className:"not-found__wrapper content-wrapper",children:[Object(d.jsx)("h2",{className:"not-found__heading",children:"404. Page Not Found"}),Object(d.jsx)(l.b,{to:"/",className:"not-found__link button-basic",children:"Back to Main Page"})]})})})})}),_=r(16),y=r.n(_),v=r(19),N=r(10),w={fetchedPropertyData:[],propertyDataIsLoading:!1,propertyDataIsError:!1},D="FETCH_INIT",F="FETCH_SUCCESS",S="FETCH_FAILURE",C=function(e,t){switch(t.type){case D:return Object(N.a)(Object(N.a)({},e),{},{propertyDataIsLoading:!0,propertyDataIsError:!1});case F:return Object(N.a)(Object(N.a)({},e),{},{fetchedPropertyData:t.payload,propertyDataIsLoading:!1,propertyDataIsError:!1});case S:return Object(N.a)(Object(N.a)({},e),{},{propertyDataIsLoading:!1,propertyDataIsError:!0});default:throw new Error}},I=function(){var e=Object(n.useReducer)(C,w),t=Object(s.a)(e,2),r=t[0],a=t[1];return Object(n.useEffect)((function(){var e=!1,t=new AbortController,r={method:"GET",signal:t.signal};return setTimeout((function(){return t.abort()}),4e3),function(){var t=Object(v.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:D}),fetch("https://603e38c548171b0017b2ecf7.mockapi.io/homes",r).then((function(e){return e.json()})).then((function(t){e||a({type:F,payload:t})})).catch((function(t){e||(console.log(t),a({type:S}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[]),[r]},L=function(){var e=Object(n.useState)(6),t=Object(s.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),i=Object(s.a)(c,2),j=i[0],u=i[1],h=I(),b=Object(s.a)(h,1)[0],f=b.fetchedPropertyData,O=Object(n.useState)(f),g=Object(s.a)(O,2),_=g[0],y=g[1];Object(n.useEffect)((function(){if(j.length>3){var e=f.filter((function(e){return function(e,t){return e.title.toLowerCase().includes(t.toLowerCase())}(e,j)}));y(e)}else y(f),a(6)}),[j,f]);var v=function(e){u(e)},N=function(){a(_.length)};return Object(d.jsx)(l.a,{basename:"/property-listing",children:Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{path:"/",exact:!0,render:function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{}),Object(d.jsx)(m,{onInputChange:v,propertyDataState:b,propertyData:_,cardLimit:r,onSeeMoreClick:N})]})}}),Object(d.jsx)(o.a,{render:function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{}),Object(d.jsx)(x,{})]})}})]})})},E=document.getElementById("root");i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(L,{})}),E)}},[[42,1,2]]]);
//# sourceMappingURL=main.14e8eb8f.chunk.js.map